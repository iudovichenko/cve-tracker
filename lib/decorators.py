def with_last_modified(fn):
    def wrapper(self, *args, **kwargs):
        fn(self, *args, **kwargs)
        if self.db_api.session.is_modified(self._):
            self.update_last_modified()
    return wrapper
