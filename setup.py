from setuptools import setup, find_packages
import re

re_http_link = re.compile(r'^https?\:\/\/')
re_egg_name = re.compile(r'#egg=(?P<name>.*)-(.*)')

requirements = []
dependencies = []

with open('requirements.txt') as f:
    for line in f:
        line = line.rstrip()
        if re_http_link.match(line):
            m = re_egg_name.search(line)
            if m:
                requirements.append(m.group('name'))
                dependencies.append(line)
        else:
            requirements.append(line)

setup(
    name = 'CVE Tracker',
    version = '0.1',
    packages = find_packages(),
    install_requires = requirements,
    dependency_links = dependencies,

    author = 'Dmitry Teselkin',
    author_email = 'dteselkin@mirantis.com',
    description = 'CVE Tracker',

    entry_points = {
        'console_scripts': [
            'cvetracker-cli=cvetracker.cli.app:main'
        ]
    }
)