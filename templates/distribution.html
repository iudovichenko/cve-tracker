{% extends "base.html" %}
{% block title %}Distribution{% endblock %}
{% block content %}
    <h1>{{obj.name}}</h1>

    <table border="1" cellpadding="5">
        <tr>
            <td bgcolor="grey">Name</td>
            <td>{{obj.name}}</td>
        </tr>
        <tr>
            <td bgcolor="grey">Version</td>
            <td>{{obj.version}}</td>
        </tr>
        <tr>
            <td bgcolor="grey">Architecture</td>
            <td>{{obj.arch}}</td>
        </tr>
    </table>

    <h2>Products</h2>
    <table border="1" cellpadding="5">
        <tr bgcolor="grey">
            <th>Product</th>
            <th>Packages</th>
        </tr>
        {% for p in obj.products %}
        <tr>
            <td><a href="../product/{{p.id}}.html">{{p}}</a></td>
            <td><a href="#product_{{p.id}}_packages">see below</a></td>
        </tr>
        {% endfor %}
    </table>

    <h2>Distribution Packages</h2>
    <table border="1" cellpadding="5">
        <tr bgcolor="grey">
            <th>Package</th>
            <th>Version</th>
        </tr>
        {% for x in obj.distribution_packages|sort(attribute='name') %}
            <tr>
                <td><a href="../source-project/{{x.source_package.project.id}}.html">{{x.name}}</a></td>
                <td><a href="../distribution-package/{{x.id}}.html">{{x.version}}</a></td>
            </tr>
        {% endfor %}
    </table>

    <h2>Product Packages</h2>
    {% for p in obj.products %}
    <h3><a name="product_{{p.id}}_packages">{{p}}</a></h3>
    <table border="1" cellpadding="5">
        <tr bgcolor="grey">
            <th>Product</th>
            <th>Package</th>
            <th>Version</th>
        </tr>
        {% for x in obj.product_packages(product=p)|sort(attribute='name') %}
            <tr>
                <td><a href="../product/{{p.id}}.html">{{p}}</a></td>
                <td><a href="../source-project/{{x.source_package.project.id}}.html">{{x.name}}</a></td>
                <td><a href="../product-package/{{x.id}}.html">{{x.version}}</a></td>
            </tr>
        {% endfor %}
    </table>
    {% endfor %}
{% endblock %}
