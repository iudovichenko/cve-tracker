{% extends "base.html" %}
{% block title %}{{obj.name}}-{{obj.version}}{% endblock %}
{% block content %}
    <h1>{{obj.name}} {{obj.version}}</h1>

    <table>
        <tr>
            <th>Project</th>
            <td><a href="../source-project/{{obj.source_package.project.id}}.html">{{obj.name}}</a></td>
        </tr>
        <tr>
            <th>Version</th>
            <td>{{obj.version}}</td>
        </tr>
        <tr>
            <th>Source Package</th>
            <td><a href="../source-package/{{obj.source_package.id}}.html">{{obj.source_package}}</a></td>
        </tr>
        <tr>
            <th>Product</th>
            <td><a href="../product/{{obj.product.id}}.html">{{obj.product}}</a></td>
        </tr>
        <tr>
            <th>Distribution</th>
            <td><a href="../distribution/{{obj.product_distribution.id}}.html">{{obj.product_distribution}}</a></td>
        </tr>
        <tr>
            <th>Origin Distribution</th>
            <td><a href="../distribution/{{obj.distribution.id}}.html">{{obj.distribution}}</a></td>
        </tr>
    </table>
{#
    <h2>Advisories</h2>
    <ul>
        {% for x in obj.advisories %}
        <li><a href="../advisory/{{x.id}}.html">{{x.name}}</a></li>
        {% endfor %}
    </ul>
#}
    <h2>CVEs</h2>
    <table>
        <tr>
            <th>CVE</th>
            <th>Affected</th>
            <th>Resolved</th>
        </tr>
        {% set related_issues = obj.related_issues(merge=True) %}
        {% for _,x in related_issues|dictsort %}
            {% set is_tracked, issues = x %}
            {% set issue = issues[0] %}
        <tr>
            <td><a href="../cve/{{issue.issue.id}}.html">{{issue.issue.name}}</a></td>
            {% if is_tracked %}
            <td bgcolor="{{'red' if issue.affected else 'green'}}">{{issue.affected}}</td>
            <td bgcolor="{{'green' if issue.resolved else 'red'}}">{{issue.resolved}}</td>
            {% else %}
            <td bgcolor="lightgrey">N/A</td>
            <td bgcolor="red">No</td>
            {% endif %}
        </tr>
        {% endfor %}
    </table>
{% endblock %}
